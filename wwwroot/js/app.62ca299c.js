(function(){"use strict";var e={6085:function(e,t,r){var s=r(5130),a=r(6768),n=r(4232),o=r.p+"img/Summa-Logo.6654907d.png";const i={id:"app"},l=(0,a.Lk)("img",{class:"summa-logo",alt:"Summa-Logo",src:o},null,-1),u=[l],c={key:0,class:"notification"};function d(e,t,r,s,o,l){const d=(0,a.g2)("UserForm"),m=(0,a.g2)("UserList"),f=(0,a.g2)("UserDetails");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",{class:"logo-container",onClick:t[0]||(t[0]=(...e)=>l.resetView&&l.resetView(...e))},u),o.notification?((0,a.uX)(),(0,a.CE)("div",c,(0,n.v_)(o.notification),1)):(0,a.Q3)("",!0),o.showForm?((0,a.uX)(),(0,a.Wv)(d,{key:1,onFormSubmitted:l.handleFormSubmitted},null,8,["onFormSubmitted"])):(0,a.Q3)("",!0),o.selectedUser||o.showForm?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(m,{key:2,users:o.users,onSelectUser:l.handleUserSelection},null,8,["users","onSelectUser"])),o.selectedUser?((0,a.uX)(),(0,a.Wv)(f,{key:3,user:o.selectedUser,onBack:l.handleBack},null,8,["user","onBack"])):(0,a.Q3)("",!0)])}const m=e=>((0,a.Qi)("data-v-eab0d1e4"),e=e(),(0,a.jt)(),e),f={class:"user-form-container"},p={class:"form-group"},g=m((()=>(0,a.Lk)("label",{for:"username"},"שם משתמש:",-1))),h={class:"form-group"},v=m((()=>(0,a.Lk)("label",{for:"email"},"אימייל:",-1))),k={class:"form-group"},b=m((()=>(0,a.Lk)("label",{for:"dob"},"תאריך לידה:",-1))),L={class:"form-group"},y=m((()=>(0,a.Lk)("label",{for:"image"},"תמונה:",-1))),w={key:0,class:"image-preview"},U=["src"],S=m((()=>(0,a.Lk)("button",{type:"submit"},"שלח",-1)));function C(e,t,r,n,o,i){return(0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("form",{onSubmit:t[12]||(t[12]=(0,s.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"])),class:"user-form"},[(0,a.Lk)("div",p,[g,(0,a.bo)((0,a.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),required:"",onInvalid:t[1]||(t[1]=e=>i.setCustomMessage(e)),onInput:t[2]||(t[2]=e=>i.clearCustomMessage(e))},null,544),[[s.Jo,o.username]])]),(0,a.Lk)("div",h,[v,(0,a.bo)((0,a.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[3]||(t[3]=e=>o.email=e),required:"",onInvalid:t[4]||(t[4]=e=>i.setCustomMessage(e)),onInput:t[5]||(t[5]=e=>i.clearCustomMessage(e))},null,544),[[s.Jo,o.email]])]),(0,a.Lk)("div",k,[b,(0,a.bo)((0,a.Lk)("input",{type:"date",id:"dob","onUpdate:modelValue":t[6]||(t[6]=e=>o.dob=e),required:"",onInvalid:t[7]||(t[7]=e=>i.setCustomMessage(e)),onInput:t[8]||(t[8]=e=>i.clearCustomMessage(e))},null,544),[[s.Jo,o.dob]])]),(0,a.Lk)("div",L,[y,(0,a.Lk)("input",{type:"file",id:"image",onChange:t[9]||(t[9]=(...e)=>i.handleImageUpload&&i.handleImageUpload(...e)),required:"",onInvalid:t[10]||(t[10]=e=>i.setCustomMessage(e)),onInput:t[11]||(t[11]=e=>i.clearCustomMessage(e))},null,32),o.imagePreview?((0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("img",{src:o.imagePreview,alt:"Image Preview"},null,8,U)])):(0,a.Q3)("",!0)]),S],32)])}r(4603),r(7566),r(8721);var _=r(8001),F=r(4373);const I=F.A.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"multipart/form-data"}}),O=async()=>{const e=await I.get("/user");return e.data.map((e=>({...e,image:`data:image/jpeg;base64,${e.image}`}))).sort(((e,t)=>t.id-e.id))},M=async e=>{const t=await I.post("/user",e);return t.data};var j={data(){return{username:"",email:"",dob:"",image:null,imagePreview:null}},methods:{handleImageUpload(e){const t=e.target.files[0];this.image=t,this.imagePreview=URL.createObjectURL(t)},async handleSubmit(){try{const e=await(0,_.A)(this.image,{maxSizeMB:1,maxWidthOrHeight:1920}),t=new FormData;t.append("username",this.username),t.append("email",this.email),t.append("dob",new Date(this.dob).toISOString().split("T")[0]),t.append("image",e),console.log("Sending payload:",{username:this.username,email:this.email,dob:this.dob,image:e}),await M(t),this.$emit("formSubmitted"),this.clearForm()}catch(e){console.error("Error submitting form:",e),this.$emit("notification","שגיאה ביצירת המשתמש.")}},clearForm(){this.username="",this.email="",this.dob="",this.image=null,this.imagePreview=null},setCustomMessage(e){const t=e.target,r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;t.validity.valueMissing?t.setCustomValidity("נא למלא שדה זה"):"email"!==t.type||r.test(t.value)?t.validity.typeMismatch?t.setCustomValidity("נא להזין ערך חוקי"):t.setCustomValidity(""):t.setCustomValidity("נא להזין כתובת אימייל חוקית")},clearCustomMessage(e){const t=e.target;t.setCustomValidity("")}}},D=r(1241);const $=(0,D.A)(j,[["render",C],["__scopeId","data-v-eab0d1e4"]]);var E=$;const X=e=>((0,a.Qi)("data-v-71782227"),e=e(),(0,a.jt)(),e),V={class:"user-list"},P=X((()=>(0,a.Lk)("h2",null,"רשימת משתמשים",-1))),x=X((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"שם משתמש"),(0,a.Lk)("th",null,"אימייל"),(0,a.Lk)("th",null,"תאריך לידה"),(0,a.Lk)("th",null,"תמונה")])],-1))),A=["onClick"],Q=["src"];function B(e,t,r,s,o,i){return(0,a.uX)(),(0,a.CE)("div",V,[P,(0,a.Lk)("table",null,[x,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.users,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,onClick:t=>i.selectUser(e),class:"clickable-row"},[(0,a.Lk)("td",null,(0,n.v_)(e.username),1),(0,a.Lk)("td",null,(0,n.v_)(e.email),1),(0,a.Lk)("td",null,(0,n.v_)(i.formatDate(e.dateOfBirth)),1),(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:e.image,alt:"User Image",class:"user-image"},null,8,Q)])],8,A)))),128))])])])}var T={props:{users:Array},methods:{selectUser(e){this.$emit("selectUser",e)},formatDate(e){const t=new Date(e),r=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return`${r}/${s}/${a}`}}};const q=(0,D.A)(T,[["render",B],["__scopeId","data-v-71782227"]]);var W=q;const J=e=>((0,a.Qi)("data-v-d24d5df4"),e=e(),(0,a.jt)(),e),R={class:"user-details"},Y=J((()=>(0,a.Lk)("h2",null,"פרטי משתמש",-1))),z={class:"form-group"},H=J((()=>(0,a.Lk)("label",null,"שם משתמש:",-1))),K={class:"form-group"},G=J((()=>(0,a.Lk)("label",null,"אימייל:",-1))),N={class:"form-group"},Z=J((()=>(0,a.Lk)("label",null,"תאריך לידה:",-1))),ee={class:"form-group"},te=J((()=>(0,a.Lk)("label",null,"תמונה:",-1))),re=["src"];function se(e,t,r,s,o,i){return(0,a.uX)(),(0,a.CE)("div",R,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"back-button"},"X"),Y,(0,a.Lk)("div",z,[H,(0,a.Lk)("p",null,(0,n.v_)(r.user.username),1)]),(0,a.Lk)("div",K,[G,(0,a.Lk)("p",null,(0,n.v_)(r.user.email),1)]),(0,a.Lk)("div",N,[Z,(0,a.Lk)("p",null,(0,n.v_)(i.formatDate(r.user.dateOfBirth)),1)]),(0,a.Lk)("div",ee,[te,(0,a.Lk)("img",{src:r.user.image,alt:"User Image",class:"user-image"},null,8,re)])])}var ae={props:{user:Object},methods:{formatDate(e){const t=new Date(e),r=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return`${r}/${s}/${a}`}}};const ne=(0,D.A)(ae,[["render",se],["__scopeId","data-v-d24d5df4"]]);var oe=ne,ie={name:"App",components:{UserForm:E,UserList:W,UserDetails:oe},data(){return{users:[],selectedUser:null,notification:"",showForm:!0}},methods:{async fetchUsers(){try{const e=await O();this.users=e}catch(e){console.error("Error fetching users:",e)}},handleFormSubmitted(){this.notification="משתמש נוצר בהצלחה!",this.fetchUsers(),this.showForm=!1,setTimeout((()=>{this.notification=""}),3e3)},handleUserSelection(e){this.selectedUser=e,this.showForm=!1},handleBack(){this.selectedUser=null,this.showForm=!1},resetView(){this.selectedUser=null,this.showForm=!0,this.notification=""}},mounted(){this.fetchUsers()}};const le=(0,D.A)(ie,[["render",d]]);var ue=le;(0,s.Ef)(ue).mount("#app")}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,s,a,n){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],a=e[c][1],n=e[c][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||o>=n)&&Object.keys(r.O).every((function(e){return r.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<o&&(o=n));if(i){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,a,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,n,o=s[0],i=s[1],l=s[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var c=l(r)}for(t&&t(s);u<o.length;u++)n=o[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(c)},s=self["webpackChunkuser_form_project"]=self["webpackChunkuser_form_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[504],(function(){return r(6085)}));s=r.O(s)})();
//# sourceMappingURL=app.62ca299c.js.map